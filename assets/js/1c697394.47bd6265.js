"use strict";(self.webpackChunkcodestar_documents=self.webpackChunkcodestar_documents||[]).push([[7240],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(t),m=a,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return t?r.createElement(f,o(o({ref:n},p),{},{components:t})):r.createElement(f,o({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},411:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=t(7462),a=(t(7294),t(3905));const i={title:"Service Workers in Action",description:"Post Message, Push Notification, Background Sync, Offline Support"},o=void 0,s={unversionedId:"frontend/PWAs/service-workers-in-action",id:"frontend/PWAs/service-workers-in-action",title:"Service Workers in Action",description:"Post Message, Push Notification, Background Sync, Offline Support",source:"@site/docs/frontend/12-PWAs/03-service-workers-in-action.md",sourceDirName:"frontend/12-PWAs",slug:"/frontend/PWAs/service-workers-in-action",permalink:"/Documents/docs/frontend/PWAs/service-workers-in-action",draft:!1,editUrl:"https://github.com/Mohaymen-Academy/Documents/tree/main/docs/frontend/12-PWAs/03-service-workers-in-action.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Service Workers in Action",description:"Post Message, Push Notification, Background Sync, Offline Support"},sidebar:"tutorialSidebar",previous:{title:"Service Workers",permalink:"/Documents/docs/frontend/PWAs/service-workers"},next:{title:"Advanced Topics on PWAs",permalink:"/Documents/docs/frontend/PWAs/advanced-topics-on-PWAs"}},c={},l=[{value:"\u0645\u0642\u062f\u0645\u0647",id:"\u0645\u0642\u062f\u0645\u0647",level:2},{value:"\u0627\u0646\u062a\u0642\u0627\u0644 \u067e\u06cc\u0627\u0645",id:"\u0627\u0646\u062a\u0642\u0627\u0644-\u067e\u06cc\u0627\u0645",level:2},{value:"Post Message API",id:"post-message-api",level:3},{value:"\u0627\u0645\u0646\u06cc\u062a",id:"\u0627\u0645\u0646\u06cc\u062a",level:3},{value:"\u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0622\u0641\u0644\u0627\u06cc\u0646 (Offline Support)",id:"\u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc-\u0622\u0641\u0644\u0627\u06cc\u0646-offline-support",level:2},{value:"\u0647\u0645\u06af\u0627\u0645 \u0633\u0627\u0632\u06cc \u067e\u0633 \u0632\u0645\u06cc\u0646\u0647 (Background Sync)",id:"\u0647\u0645\u06af\u0627\u0645-\u0633\u0627\u0632\u06cc-\u067e\u0633-\u0632\u0645\u06cc\u0646\u0647-background-sync",level:2},{value:"\u067e\u0648\u0634 \u0646\u0648\u062a\u06cc\u0641\u06cc\u06a9\u06cc\u0634\u0646 (Push Notification)",id:"\u067e\u0648\u0634-\u0646\u0648\u062a\u06cc\u0641\u06cc\u06a9\u06cc\u0634\u0646-push-notification",level:2},{value:"Permission",id:"permission",level:3},{value:"Subscription",id:"subscription",level:3},{value:"Push",id:"push",level:3}],p={toc:l};function u(e){let{components:n,...i}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,i,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"offline-support",src:t(2195).Z,width:"4800",height:"2520"})),(0,a.kt)("h2",{id:"\u0645\u0642\u062f\u0645\u0647"},"\u0645\u0642\u062f\u0645\u0647"),(0,a.kt)("p",null,"\u062f\u0631 \u0627\u06cc\u0646 \u0628\u062e\u0634 \u0628\u0647 \u0628\u0631\u0631\u0633\u06cc \u0646\u062d\u0648\u0647 \u0627\u0646\u062a\u0642\u0627\u0644 \u067e\u06cc\u0627\u0645 \u0627\u0632 clinet \u0628\u0647 service worker \u0648 \u0628\u0631\u0639\u06a9\u0633 \u0645\u06cc \u067e\u0631\u062f\u0627\u0632\u06cc\u0645. \u0647\u0645\u0686\u0646\u06cc\u0646 \u06f3 \u0648\u06cc\u0698\u06af\u06cc \u0645\u0647\u0645 \u06a9\u0647 service workers \u062f\u0631 \u0627\u062e\u062a\u06cc\u0627\u0631 \u0645\u0627 \u0642\u0631\u0627\u0631 \u0645\u06cc \u062f\u0647\u0646\u062f \u0631\u0627 \u0628\u0631\u0631\u0633\u06cc \u0645\u06cc \u06a9\u0646\u06cc\u0645 \u06a9\u0647 \u0639\u0628\u0627\u0631\u062a\u0646\u062f \u0627\u0632:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Offline Support"),(0,a.kt)("li",{parentName:"ul"},"Background Sync"),(0,a.kt)("li",{parentName:"ul"},"Push Notification")),(0,a.kt)("h2",{id:"\u0627\u0646\u062a\u0642\u0627\u0644-\u067e\u06cc\u0627\u0645"},"\u0627\u0646\u062a\u0642\u0627\u0644 \u067e\u06cc\u0627\u0645"),(0,a.kt)("p",null,"\u0627\u0646\u062a\u0641\u0627\u0644 \u067e\u06cc\u0627\u0645 (Message Passing) \u0627\u062c\u0627\u0632\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f \u062a\u0627 \u0646\u062e \u0627\u0635\u0644\u06cc \u0648 Service Worker \u0628\u0647 \u0635\u0648\u0631\u062a \u0628\u06cc\u200c\u062f\u0631\u0646\u06af \u062f\u0627\u062f\u0647\u200c\u0647\u0627 \u0648 \u062f\u0633\u062a\u0648\u0631\u0627\u0644\u0639\u0645\u0644\u200c\u0647\u0627 \u0631\u0627 \u062a\u0628\u0627\u062f\u0644 \u06a9\u0646\u0646\u062f. \u0627\u06cc\u0646 \u06a9\u0627\u0646\u0627\u0644 \u0627\u0631\u062a\u0628\u0627\u0637\u06cc \u0628\u0647 \u0646\u062e \u0627\u0635\u0644\u06cc \u0627\u0645\u06a9\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u062a\u0627 \u0648\u0638\u0627\u06cc\u0641 \u0645\u062e\u062a\u0644\u0641\u06cc \u0631\u0627 \u062f\u0631 \u06a9\u0627\u0631\u06af\u0631 \u067e\u0633\u200c\u0632\u0645\u06cc\u0646\u0647 (Background Worker) \u0641\u0639\u0627\u0644 \u06a9\u0646\u062f \u0648 \u0628\u0631\u0639\u06a9\u0633."),(0,a.kt)("h3",{id:"post-message-api"},"Post Message API"),(0,a.kt)("p",null,"\u0628\u0631\u0627\u06cc \u062a\u0628\u0627\u062f\u0644 \u067e\u06cc\u0627\u0645 \u0628\u06cc\u0646 Service Worker \u0648 \u0646\u062e \u0627\u0635\u0644\u06cc \u0627\u0632 Post Message API \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc \u0634\u0648\u062f."),(0,a.kt)("p",null,"\u062f\u0631 \u0642\u0637\u0639\u0647 \u06a9\u062f \u0632\u06cc\u0631 \u067e\u06cc\u0627\u0645 FetchData \u0631\u0627 \u0628\u0631\u0627\u06cc service worker \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc \u06a9\u0646\u06cc\u0645 \u062a\u0627 \u062c\u0644\u0648 \u062a\u0631 \u0627\u0632 \u0622\u0646 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u0645."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Main thread sends messages to service worker\n\nif ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n        .then((registration) => {\n            registration.active.postMessage('FetchData');\n        })\n        .catch((error) => {\n            console.log('Error accessing service worker', error);\n        });\n}\n")),(0,a.kt)("p",null,"\u062d\u0627\u0644\u0627 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0631\u062f\u0647 \u0648 \u0628\u0627 \u0647\u0645\u0627\u0646 postMessage \u062c\u0648\u0627\u0628 \u0631\u0627 \u0628\u0647 client \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc \u06a9\u0646\u06cc\u0645."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Get message from client and send back the answer\n\nself.addEventListener('message', (event) => {\n    const messageFromMainThread = event.data;\n\n    if (messageFromMainThread === 'FetchData') {\n        // Perform a fetch operation and send back the response to the main thread\n        fetch('https://api.example.com/data')\n            .then((response) => response.json())\n            .then((data) => {\n                // Send the data back to the main thread\n\n                // Method 1:\n                // self.clients.get(event.source.id).then((client) => {\n                //   client.postMessage(data);\n                // });\n\n                // Method 2:\n                event.source.postMessage(data);\n            });\n    }\n});\n")),(0,a.kt)("h3",{id:"\u0627\u0645\u0646\u06cc\u062a"},"\u0627\u0645\u0646\u06cc\u062a"),(0,a.kt)("p",null,"\u0628\u0647\u200c\u0637\u0648\u0631 \u06a9\u0644\u06cc postMessage \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06cc\u06a9 \u0645\u06a9\u0627\u0646\u06cc\u0632\u0645 \u0628\u0633\u06cc\u0627\u0631 \u0627\u0645\u0646 \u062f\u0631 \u0646\u0638\u0631 \u06af\u0631\u0641\u062a\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f\u060c \u062a\u0627 \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0646\u0648\u06cc\u0633 \u0628\u0627 \u062f\u0642\u062a \u0628\u0631\u0631\u0633\u06cc \u06a9\u0646\u062f \u06a9\u0647 \u0645\u0646\u0628\u0639 \u0648 \u0627\u0635\u0644 \u067e\u06cc\u0627\u0645\u06cc \u06a9\u0647 \u062f\u0631 \u062d\u0627\u0644 \u0631\u0633\u06cc\u062f\u0646 \u0627\u0633\u062a \u0645\u0648\u0631\u062f \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u0627\u0633\u062a \u06cc\u0627 \u062e\u06cc\u0631. \u0639\u0645\u0644 \u0628\u0647 \u06cc\u06a9 \u067e\u06cc\u0627\u0645 \u0628\u062f\u0648\u0646 \u062a\u0623\u06cc\u06cc\u062f \u0645\u0628\u062f\u0623 \u0622\u0646\u060c \u0631\u0627\u0647\u06cc \u0628\u0631\u0627\u06cc \u062d\u0645\u0644\u0627\u062a Cross-Site Scripting \u0628\u0627\u0632 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648 \u0645\u06cc \u062a\u0648\u0627\u0646\u062f \u0628\u0627\u0639\u062b \u0645\u0634\u06a9\u0644\u0627\u062a \u0627\u0645\u0646\u06cc\u062a\u06cc \u062f\u06cc\u06af\u0631\u06cc \u0646\u06cc\u0632 \u0634\u0648\u062f."),(0,a.kt)("p",null,"\u0628\u0631\u0627\u06cc \u062a\u0639\u06cc\u06cc\u0646 \u0645\u0628\u062f\u0623 \u0628\u0647 \u0634\u06a9\u0644 \u0632\u06cc\u0631 \u0639\u0645\u0644 \u0645\u06cc \u06a9\u0646\u06cc\u0645:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"//service worker\n\nself.addEventListener('message', (event) => {\n    // Check the origin of the incoming message\n    const trustedOrigins = ['https://www.example.com', 'https://subdomain.example.com'];\n    if (!trustedOrigins.includes(event.origin)) {\n        // Message is from an untrusted origin, ignore it\n        return;\n    }\n\n    // Sanitize and process the message from the trusted origin\n    const sanitizedMessage = sanitizeContent(event.data);\n    // ... Your code to handle the sanitized message ...\n});\n")),(0,a.kt)("p",null,"\u062f\u0631 \u0622\u062e\u0631 \u0648\u0642\u062a\u06cc \u0627\u0632 \u0645\u0628\u062f\u0623 \u067e\u06cc\u0627\u0645 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062d\u0627\u0635\u0644 \u06a9\u0631\u062f\u06cc\u0645 \u0622\u0646 \u0631\u0627 sanitize \u0645\u06cc \u06a9\u0646\u06cc\u0645 \u062a\u0627 \u0627\u0632 \u0627\u0645\u0646\u06cc\u062a \u0622\u0646 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062d\u0627\u0635\u0644 \u06a9\u0646\u06cc\u0645."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"function sanitizeContent(content) {\n    // You can use a library like DOMPurify to sanitize HTML content\n    // Be careful not to remove necessary elements or attributes\n    // For this example, we will use a simple escape function\n    return escapeHTML(content);\n}\n\nfunction escapeHTML(unsafeString) {\n    return unsafeString.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n")),(0,a.kt)("admonition",{title:"\u0645\u0637\u0627\u0644\u0639\u0647",type:"tip"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage"},"Post Message MDN")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://gist.github.com/jedp/3005816#checklist-for-postmessage-security-review"},"Post Message Security Checklist")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/HTML_Sanitizer_API"},"Sanitizer API MDN")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://blog.logrocket.com/what-you-need-know-inbuilt-browser-html-sanitization/"},"What is Sanitization")))),(0,a.kt)("h2",{id:"\u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc-\u0622\u0641\u0644\u0627\u06cc\u0646-offline-support"},"\u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0622\u0641\u0644\u0627\u06cc\u0646 (Offline Support)"),(0,a.kt)("p",null,"\u0628\u0631\u0627\u06cc \u0628\u0647\u0628\u0648\u062f \u062a\u062c\u0631\u0628\u0647 \u06a9\u0627\u0631\u0628\u0631\u06cc \u0622\u0641\u0644\u0627\u06cc\u0646\u060c \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0635\u0641\u062d\u0627\u062a \u06cc\u0627 \u0642\u0627\u0644\u0628\u200c\u0647\u0627\u06cc \u0622\u0641\u0644\u0627\u06cc\u0646 \u062e\u0627\u0635\u06cc \u0631\u0627 \u0637\u0631\u0627\u062d\u06cc \u06a9\u0646\u0646\u062f. \u0627\u06cc\u0646 \u0635\u0641\u062d\u0627\u062a \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u067e\u06cc\u0627\u0645 \u06cc\u0627 \u0631\u0627\u0628\u0637 \u06a9\u0627\u0631\u0628\u0631\u06cc \u0633\u0641\u0627\u0631\u0634\u06cc \u0646\u0645\u0627\u06cc\u0634 \u062f\u0647\u0646\u062f \u0648 \u0628\u0647 \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0627\u0637\u0644\u0627\u0639 \u062f\u0647\u0646\u062f \u06a9\u0647 \u062f\u0631 \u062d\u0627\u0644\u062a \u0622\u0641\u0644\u0627\u06cc\u0646 \u0647\u0633\u062a\u0646\u062f \u0648 \u0622\u0646\u200c\u0647\u0627 \u0631\u0627 \u0631\u0627\u0647\u0646\u0645\u0627\u06cc\u06cc \u06a9\u0646\u0646\u062f \u06a9\u0647 \u062f\u0631 \u062d\u0627\u0644\u062a \u0622\u0641\u0644\u0627\u06cc\u0646 \u0686\u0647 \u06a9\u0627\u0631\u0647\u0627\u06cc\u06cc \u0627\u0646\u062c\u0627\u0645 \u062f\u0647\u0646\u062f."),(0,a.kt)("p",null,"\u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0645\u062b\u0627\u0644 \u062f\u0631 \u0642\u0637\u0639\u0647 \u06a9\u062f \u0632\u06cc\u0631 \u0627\u0628\u062a\u062f\u0627 \u0628\u0631\u0631\u0633\u06cc \u0645\u06cc \u06a9\u0646\u06cc\u0645 \u06a9\u0647 \u0622\u06cc\u0627 \u062f\u0627\u062f\u0647 \u0647\u0627\u06cc \u0645\u0648\u0631\u062f \u0646\u06cc\u0627\u0632 \u062f\u0631 \u06a9\u0634 \u0645\u0648\u062c\u0648\u062f \u0647\u0633\u062a\u0646\u062f \u06cc\u0627 \u062e\u06cc\u0631. \u0627\u06af\u0631 \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0634\u062a\u0646\u062f \u0633\u0639\u06cc \u0645\u06cc \u06a9\u0646\u06cc\u0645 \u0622\u0646 \u0647\u0627 \u0631\u0627 \u0627\u0632 \u0637\u0631\u06cc\u0642 network \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u06cc\u0645 \u0648 \u0628\u0647 \u06a9\u0634 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u0645 \u0648 \u0627\u06af\u0631 \u0627\u06cc\u0646 \u0647\u0645 \u0646\u0634\u062f \u0627\u0632 offline.html \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc \u06a9\u0646\u06cc\u0645."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// service-worker.js\nself.addEventListener('fetch', (event) => {\n    event.respondWith(\n        caches.match(event.request).then((response) => {\n            // Serve the cached resource if available\n            if (response) {\n                return response;\n            }\n\n            // Fetch the resource from the network and add it to the cache\n            return fetch(event.request)\n                .then((response) => {\n                    const clonedResponse = response.clone();\n                    caches.open('my-cache').then((cache) => {\n                        cache.put(event.request, clonedResponse);\n                    });\n                    return response;\n                })\n                .catch((error) => {\n                    // If offline and the resource is not in cache, show the offline page\n                    if (event.request.mode === 'navigate') {\n                        return caches.match('/offline.html');\n                    }\n                });\n        })\n    );\n});\n")),(0,a.kt)("admonition",{title:"\u062a\u0648\u062c\u0647",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"\u062f\u0631 \u0642\u0637\u0639\u0647 \u06a9\u062f \u0628\u0627\u0644\u0627 \u0641\u0631\u0636 \u0628\u0631 \u0627\u06cc\u0646 \u0627\u0633\u062a \u06a9\u0647 \u0641\u0627\u06cc\u0644 offline.html \u062f\u0631 \u0645\u0631\u062d\u0644\u0647 \u0646\u0635\u0628 \u0628\u0647 \u06a9\u0634 \u0627\u0636\u0627\u0641\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a.")),(0,a.kt)("h2",{id:"\u0647\u0645\u06af\u0627\u0645-\u0633\u0627\u0632\u06cc-\u067e\u0633-\u0632\u0645\u06cc\u0646\u0647-background-sync"},"\u0647\u0645\u06af\u0627\u0645 \u0633\u0627\u0632\u06cc \u067e\u0633 \u0632\u0645\u06cc\u0646\u0647 (Background Sync)"),(0,a.kt)("p",null,"\u0647\u0645\u06af\u0627\u0645\u200c\u0633\u0627\u0632\u06cc \u067e\u0633\u200c \u0632\u0645\u06cc\u0646\u0647 \u0628\u0647 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627\u06cc \u0648\u0628 \u0627\u062c\u0627\u0632\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f \u062f\u0627\u062f\u0647\u200c\u0647\u0627 \u0631\u0627 \u0628\u0627 \u0633\u0631\u0648\u0631 \u0647\u0645\u06af\u0627\u0645\u200c\u0633\u0627\u0632\u06cc \u06a9\u0646\u0646\u062f\u060c \u062d\u062a\u06cc \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 \u0628\u0631\u0646\u0627\u0645\u0647 \u0622\u0641\u0644\u0627\u06cc\u0646 \u0627\u0633\u062a \u06cc\u0627 \u0627\u062a\u0635\u0627\u0644 \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u062f\u0627\u0631\u062f. \u0627\u06cc\u0646 \u0648\u06cc\u0698\u06af\u06cc \u062a\u0636\u0645\u06cc\u0646 \u0645\u06cc\u200c\u06a9\u0646\u062f \u06a9\u0647 \u062a\u0639\u0627\u0645\u0644\u0627\u062a \u06a9\u0627\u0631\u0628\u0631 \u0648 \u062f\u0627\u062f\u0647\u200c\u0647\u0627 \u0628\u0647 \u062f\u0644\u06cc\u0644 \u0627\u062e\u062a\u0644\u0627\u0644\u0627\u062a \u0634\u0628\u06a9\u0647 \u0627\u0632 \u062f\u0633\u062a \u0646\u0631\u0641\u062a\u0647 \u0648 \u062a\u062c\u0631\u0628\u0647 \u06a9\u0627\u0631\u0628\u0631\u06cc \u0628\u0647\u0628\u0648\u062f \u0645\u06cc\u200c\u06cc\u0627\u0628\u062f."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"const handleSync = () => {\n    if ('serviceWorker' in navigator && 'SyncManager' in window) {\n        navigator.serviceWorker.ready.then((registration) => {\n            return registration.sync\n                .register('data-sync')\n                .then(() => {\n                    // Data will be synced in the background when the user has a stable internet connection\n                    console.log('Data registered for background sync.');\n                })\n                .catch((error) => {\n                    // Registration failed\n                    console.error('Background sync registration failed:', error);\n                });\n        });\n    } else {\n        // Background sync is not supported\n        console.log('Background sync is not supported in this browser.');\n    }\n};\n")),(0,a.kt)("p",null,"\u062d\u0627\u0644\u0627 \u0645\u06cc \u062a\u0648\u0627\u0646 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u062a\u06af data-sync \u0628\u0631\u0627\u06cc service worker \u06cc\u06a9 \u062a\u0633\u06a9 \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0631\u062f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"self.addEventListener('sync', (event) => {\n    if (event.tag === 'data-sync') {\n        // handleDataSync function will be called when the user has a stable internet connection\n        // You can perform the necessary actions to sync your data\n        event.waitUntil(handleDataSync());\n    }\n});\n")),(0,a.kt)("admonition",{title:"\u0645\u0637\u0627\u0644\u0639\u0647",type:"tip"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Background_Synchronization_API"},"Background Sync API MDN"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/SyncManager"},"SyncManager MDN"))))),(0,a.kt)("h2",{id:"\u067e\u0648\u0634-\u0646\u0648\u062a\u06cc\u0641\u06cc\u06a9\u06cc\u0634\u0646-push-notification"},"\u067e\u0648\u0634 \u0646\u0648\u062a\u06cc\u0641\u06cc\u06a9\u06cc\u0634\u0646 (Push Notification)"),(0,a.kt)("h3",{id:"permission"},"Permission"),(0,a.kt)("p",null,"\u0628\u0631\u0627\u06cc \u0627\u0631\u0633\u0627\u0644 \u0627\u0639\u0644\u0627\u0646 \u0628\u0639\u062f \u0627\u0632 \u0628\u0631\u0631\u0633\u06cc \u0627\u06cc\u0646\u06a9\u0647 \u0645\u0631\u0648\u0631 \u06af\u0631 \u0627\u0632 \u0627\u0631\u0633\u0627\u0644 \u0627\u0639\u0644\u0627\u0646 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc \u06a9\u0646\u062f \u0627\u0632 \u06a9\u0627\u0631\u0628\u0631 \u0645\u06cc \u062e\u0648\u0627\u0647\u06cc\u0645 \u06a9\u0647 \u0627\u062c\u0627\u0632\u0647 \u0627\u0631\u0633\u0627\u0644 \u0627\u0639\u0644\u0627\u0646 \u0631\u0627 \u0635\u0627\u062f\u0631 \u06a9\u0646\u062f."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"useEffect(() => {\n    // Request permission for notifications\n    if ('Notification' in window) {\n        Notification.requestPermission().then((permission) => {\n            if (permission === 'granted') {\n                console.log('Notification permission granted.');\n                subscribeUserToPush();\n            } else {\n                console.log('Notification permission denied.');\n            }\n        });\n    }\n}, []);\n")),(0,a.kt)("h3",{id:"subscription"},"Subscription"),(0,a.kt)("p",null,"\u0633\u067e\u0633 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 subscription \u0631\u0627 \u062f\u0631\u06cc\u0627\u0641\u062a \u0648 \u0628\u0647 \u0633\u0631\u0648\u0631 \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc \u06a9\u0646\u06cc\u0645."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"const subscribeUserToPush = async () => {\n    try {\n        const registration = await navigator.serviceWorker.ready;\n        const subscription = await registration.pushManager.subscribe({\n            userVisibleOnly: true,\n            applicationServerKey: 'YOUR_PUBLIC_VAPID_KEY',\n        });\n\n        // Send the subscription details to your server\n        sendSubscriptionToServer(subscription);\n    } catch (error) {\n        console.error('Error subscribing to push notifications:', error);\n    }\n};\n\nconst sendSubscriptionToServer = (subscription) => {\n    // Send the subscription details to your server using fetch or any other method\n};\n")),(0,a.kt)("p",null,"\u0648 \u062f\u0631 \u0646\u0647\u0627\u06cc\u062a \u0628\u0631\u0627\u06cc \u0627\u0631\u0633\u0627\u0644 \u0627\u0639\u0644\u0627\u0646 \u062f\u0627\u0631\u06cc\u0645:"),(0,a.kt)("h3",{id:"push"},"Push"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// serviceWorker\n\nself.addEventListener('push', (event) => {\n    if (event.data) {\n        const notificationData = event.data.json();\n        const options = {\n            body: notificationData.body,\n            icon: '/path/to/icon.png', // Replace with the path to your app's icon\n        };\n        event.waitUntil(self.registration.showNotification(notificationData.title, options));\n    }\n});\n")),(0,a.kt)("admonition",{title:"\u0645\u0637\u0627\u0644\u0639\u0647",type:"tip"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Tutorials/js13kGames/Re-engageable_Notifications_Push"},"Using Push Notification MDN")))))}u.isMDXComponent=!0},2195:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/offline-support-bd83d4858be062197355be181cba044b.jpg"}}]);