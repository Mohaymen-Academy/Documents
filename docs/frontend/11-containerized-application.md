---
title: Containerized Applications
description: How to containerized applications with docker
---

## مقدمه

زمانی که با تیم های بزرگ شروع به کار میکنیم زیر ساخت انها بر اساس [docker compose ](https://docs.docker.com/compose/)- [docker swarm](https://docs.docker.com/engine/swarm/) - [kubernetes](https://kubernetes.io/) پیاده سازی شده است.
در نتیجه ما به عنوان برنامه نویس فرانت باید بتوانیم فایل های پروژه خود را در درون این نوع زیر ساخت متنشر کنیم.
از این جهت ما باید بتوانیم داکر فایل اپلیکیشن خود را نوشته و ان را تحویل مدیر devops بدهیم تا ان را در درون فرایند CI/CD قرار داده و مکانیزم اتوماتیک انتشار نسخه را داشته باشیم.

---

## Whats Docker? 
داکر یک نوعی زیر ساخت است که این امکان را به ما میدهد در یک فضای ایزوله بر بستر سیستم عامل یک ماشین مجازی داشته باشیم تا بتوانیم برنامه های خود را ( به صورت ایزوله ) اجرا کنیم
فرایند ساخت این فضای ایزوله و نصب برنامه ها به صورت زیر میباشد:
۱.ساخت داکر فایل 
۲.ساخت image از داکر فایل 
3.اجرا image و تبدیل ان به container

در نهایت container ما همان ماشین مجازی است که توسط داکر فایل ما کانفیگ و در درون Ram اجرا شده و اماده سرویس دهی میباشد.
به این container ها در زیر ساخت kubernetes با نام pod یاد میکنند



### تعریف

برای آشنایی بیشتر با این مفهوم می‌توانید از لینک‌های زیر استفاده کنید:

-   [Docker - What Docker?](https://docs.docker.com/get-started/overview/)
-   [Medium - How to Dockerized react app](https://medium.com/swlh/dockerizing-your-reactjs-application-c59109e97861)

---
## داکرایز کردن یک پروژه React به همراه Nginx
برای dockerize کردن یک اپلیکیشن React به همراه Nginx، می‌توان مراحل زیر را دنبال کرد:

### ساخت اپلیکیشن React:
 می‌توان از`Vite` یا هر ابزار دیگری برای ساخت یک اپلیکیشن React استفاده کرد. در این آموزش از ابزار vite برای ساخت اپلیکیشن استفاده شده است. اما ابزار‌های دیگر نیز تفاوت خاصی ندارند.
 
### کانفیگ Nginx:
می‌توان از`Vite` یا هر ابزار دیگری برای ساخت یک اپلیکیشن React استفاده کرد. در این آموزش از ابزار vite برای ساخت اپلیکیشن استفاده شده است. اما ابزار‌های دیگر نیز تفاوت خاصی ندارند.

### ایجاد Dockerfile:
در Dockerfile مراحل زیر را دنیال می‌کنیم:  
  ##### 1- از بیس ایمیج (Base Image) node برای Containerize کردن اپلیکیشن React استفاده کنید. همچنین برای این کانتیر باید نام مشخصی تعریف کنیم که در مراحل         بعدی از این نام برای کپی کردن فایل‌‌های مورد نیاز استفاده خواهد شد.  
  ##### 2- ورک دایرکتوری را در محل دلخواهی از کانتینر تغریف می‌کنیم.  
  ##### 3- فایل‌های پروژه را در محل WORKDIR با دستور COPY منتقل می‌کنیم. 
  ##### 3- دستور `npm install` برای نصب پکیج‌ها و دستور `npm run build` را برای ساخت نسخه پروداکشن اپلیکیشن در داکرفایل قرار می‌دهیم.  
  ##### 4- از یک بیس ایمیج جدید برای ساخت کانتینر nginx استفاده میکنیم.  
  ##### 5- در nginx به صورت پیشفرض فایل‌های HTML استاتیک از آدرس usr/share/nginx/html/ خوانده می‌شوند در نتیجه فایل‌های بیلد شده از کانتینر قبلی را در این           آدرس در کانتیر جدید منتقل می‌کنیم.  
  ##### 6- برای کپی از کانتینر قبلی باید از نام تعریف شده در مرحله قبل و دستور `COPY --from="previus image name "src" "dest` استفاده کنیم. 
  ##### 7- در صورت وجود کانیفیگ برای nginx فایل را در محل `/etc/nginx/conf.d/` در کانتینر با دستور COPY انتقال می‌دهیم.
  ##### 8- پورت دیفالت nginx به صورت پیشفرض ۸۰ می‌باشد.
  
  در زیر Dockerfile مربوط به مراحل بالا ارائه شده است:
  

```Dockerfile
FROM node:latest as build
WORKDIR /app
COPY . .
RUN npm install
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/build /usr/share/nginx/html
COPY nginx/default.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
```




## پروژه

ساخت داکر فایل یک پروژه ریکت و اجرای ان روی کانتینر 
